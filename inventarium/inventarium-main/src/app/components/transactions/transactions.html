<div class="container">
  <div class="page-header">
    <div class="page-header-content">
      <div class="page-header-text">
        <h1 class="page-title">Hist√≥rico de Transa√ß√µes</h1>
        <p class="page-subtitle">Visualize e gerencie todo o hist√≥rico de movimenta√ß√µes do estoque</p>
      </div>
      <div class="page-header-actions">
        <div class="search-container">
          <div class="search-input-wrapper">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
              <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
            </svg>
            <input 
              #searchInput
              type="text" 
              class="search-input" 
              placeholder="Pesquisar transa√ß√µes..." 
              [value]="searchTerm()"
              (input)="onSearchChange(searchInput.value)" 
            />
          </div>
        </div>
        <button class="btn btn-primary btn-action" (click)="goToNewTransaction()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="M12 8V16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Nova Transa√ß√£o
        </button>
      </div>
    </div>
  </div>

  <!-- Cards de estat√≠sticas como filtro -->
  <div class="stats-grid" *ngIf="transactions().length > 0">
    <div 
      class="stat-card"
      [class.active]="filterType() === 'all'"
      style="cursor:pointer"
      (click)="setFilterType('all')"
    >
      <div class="stat-icon primary">üìä</div>
      <h3 class="stat-value">{{ transactions().length }}</h3>
      <p class="stat-label">Total de Transa√ß√µes</p>
    </div>
    <div 
      class="stat-card"
      [class.active]="filterType() === 'ENTRADA'"
      style="cursor:pointer"
      (click)="setFilterType('ENTRADA')"
    >
      <div class="stat-icon success">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M12 19V5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M7 10L12 5L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
  <h3 class="stat-value">{{ getTotalEntradas() }}</h3>
      <p class="stat-label">Entradas</p>
    </div>
    <div 
      class="stat-card"
      [class.active]="filterType() === 'SAIDA'"
      style="cursor:pointer"
      (click)="setFilterType('SAIDA')"
    >
      <div class="stat-icon danger">üìâ</div>
  <h3 class="stat-value">{{ getTotalSaidas() }}</h3>
      <p class="stat-label">Sa√≠das</p>
    </div>
  </div>

  <!-- ...cards j√° substitu√≠dos acima... -->

  <!-- Transaction List -->
  <div *ngIf="filteredTransactions().length > 0; else noTransactions" class="transactions-list">
    <div *ngFor="let transaction of filteredTransactions()" class="transaction-card">
      <div class="transaction-header">
        <div class="transaction-product">
                <h4 class="detail-label highlight-date">Data: {{ formatDate(transaction.date) }}</h4>
                <span class="product-id" style="display:block; margin-top:0.25em;">ID: {{ transaction.id }}</span>
        </div>
        <div class="transaction-type">
          <span class="type-badge" [ngClass]="{
            'type-entrada': transaction.type === 'ENTRADA',
            'type-saida': transaction.type === 'SAIDA'
          }">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" *ngIf="transaction.type === 'ENTRADA'">
              <path d="M12 2L12 22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M17 7L12 2L7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" *ngIf="transaction.type === 'SAIDA'">
              <path d="M12 2L12 22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M7 17L12 22L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            {{ transaction.type === 'ENTRADA' ? 'Entrada' : 'Sa√≠da' }}
          </span>
        </div>
      </div>
      
      <div class="transaction-details">
        <div class="detail-item">
          <span class="detail-label">Usu√°rio:</span>
          <span class="detail-value">{{ transaction.usuarioId }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Valor Total:</span>
          <span class="detail-value value-highlight">{{ transaction.totalValue | currency:'BRL':'symbol':'1.2-2':'pt-BR' }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <ng-template #noTransactions>
    <div class="empty-state">
      <div class="empty-content">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"/>
          <path d="M8 12H16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M12 8V16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <h3>Nenhuma transa√ß√£o encontrada</h3>
        <p>Ainda n√£o h√° transa√ß√µes registradas no sistema.</p>
        <button class="btn btn-primary" (click)="goToNewTransaction()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="M12 8V16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Registrar primeira transa√ß√£o
        </button>
      </div>
    </div>
  </ng-template>
</div>
