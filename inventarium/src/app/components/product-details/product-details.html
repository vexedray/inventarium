<div class="container mt-5" *ngIf="product()">
  <div class="product-form mx-auto">
    <h3 class="text-center mb-4">Detalhes do Produto</h3>
    
    <form (ngSubmit)="saveProduct()">
      <div class="row g-3">
        <div class="col-md-6">
          <label>Marca</label>
          <input 
            type="number" 
            class="form-control" 
            [readonly]="!isEditing()" 
            [value]="isEditing() ? editableProduct?.brand : product()!.brand"
            (input)="isEditing() && editableProduct ? editableProduct.brand = +$any($event.target).value : null"
            name="brand" />
        </div>
        <div class="col-md-6">
          <label>Nome</label>
          <input 
            type="text" 
            class="form-control" 
            [readonly]="!isEditing()" 
            [value]="isEditing() ? editableProduct?.name : product()!.name"
            (input)="isEditing() && editableProduct ? editableProduct.name = $any($event.target).value : null"
            name="name" />
        </div>
        <div class="col-md-6">
          <label>Descrição</label>
          <textarea 
            class="form-control" 
            [readonly]="!isEditing()" 
            [value]="isEditing() ? editableProduct?.description : product()!.description"
            (input)="isEditing() && editableProduct ? editableProduct.description = $any($event.target).value : null"
            name="description"></textarea>
        </div>
        <div class="col-md-6">
          <label>Código de Fabricante</label>
          <input 
            type="text" 
            class="form-control" 
            [readonly]="!isEditing()" 
            [value]="isEditing() ? editableProduct?.manufacturerCode : product()!.manufacturerCode"
            (input)="isEditing() && editableProduct ? editableProduct.manufacturerCode = $any($event.target).value : null"
            name="manufacturerCode" />
        </div>
        <div class="col-md-6">
          <label>Garantia (meses)</label>
          <input 
            type="number" 
            class="form-control" 
            [readonly]="!isEditing()" 
            [value]="isEditing() ? editableProduct?.warrantyMonths : product()!.warrantyMonths"
            (input)="isEditing() && editableProduct ? editableProduct.warrantyMonths = +$any($event.target).value : null"
            name="warrantyMonths" />
        </div>
        <div class="col-md-6">
          <label>Localização</label>
          <input 
            type="text" 
            class="form-control" 
            [readonly]="!isEditing()" 
            [value]="isEditing() ? editableProduct?.stockLocation : product()!.stockLocation"
            (input)="isEditing() && editableProduct ? editableProduct.stockLocation = $any($event.target).value : null"
            name="stockLocation" />
        </div>
        <div class="col-md-6">
          <label>Valor Unitário</label>
          <input 
            type="number" 
            step="0.01" 
            class="form-control" 
            [readonly]="!isEditing()" 
            [value]="isEditing() ? editableProduct?.unitPrice : product()!.unitPrice"
            (input)="isEditing() && editableProduct ? editableProduct.unitPrice = +$any($event.target).value : null"
            name="unitPrice" />
        </div>
        <div class="col-md-6">
          <label>Quantidade</label>
          <input 
            type="number" 
            class="form-control" 
            [readonly]="!isEditing()" 
            [value]="isEditing() ? editableProduct?.quantity : product()!.quantity"
            (input)="isEditing() && editableProduct ? editableProduct.quantity = +$any($event.target).value : null"
            name="quantity" />
        </div>
      </div>

      <div class="d-flex justify-content-between align-items-center mt-4 flex-wrap">
        <button type="button" class="btn btn-secondary" (click)="goBack()">Voltar</button>
        
        <div *ngIf="!isEditing()">
          <button type="button" class="btn btn-primary me-2" (click)="enableEdit()">Editar</button>
          <button type="button" class="btn btn-danger" (click)="deleteProduct()">Deletar</button>
        </div>
        
        <div *ngIf="isEditing()">
          <button type="submit" class="btn btn-success me-2">Salvar</button>
          <button type="button" class="btn btn-secondary" (click)="cancelEdit()">Cancelar</button>
        </div>
      </div>
    </form>
  </div>
</div>
